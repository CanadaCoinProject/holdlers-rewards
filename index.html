<html lang='us'>
<head>
    <script src='src/cada.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/web3/3.0.0-rc.5/web3.min.js'></script>
    <script src='src/index.js'></script>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' href='src/infopage.css'> <!-- DO NOT PUT A LINK TAG ABOVE THIS ONE -->
    <link rel='stylesheet' href='src/generic.css'>
    <!--<link rel="shortcut icon" type="image/jpg" href="img/favicon.png"/>-->
</head>
<body>
<header>

    <a class='logotext'> <img class='logo' src='img/simple_cada.svg' alt='Canada Coin'></a>


    <a class='introtext'>CADA<br>reward tracker</a>
    <nav>
        <ul id='navList'>
            <li>
                <a href='https://exchange.pancakeswap.finance/#/swap?outputCurrency=0x221AfB058453B1d228BfdAc3b1aAB42f41e37489'
                   target='_blank' class='navLinks'>
                    Buy
                </a>
            </li>
            <li>
                <a href='https://canadacoin.finance/' target='_blank' class='navLinks'>Home</a>
            </li>
            <li><a href='https://poocoin.app/tokens/0x221afb058453b1d228bfdac3b1aab42f41e37489'
                   target='_blank' class='navLinks'>
                Chart
            </a>
            </li>
        </ul>

        <button id='darkModeToggle' onclick='changeCSS()'>
            <img src='./img/sun-black.svg' alt='toggle icon' id='toggleIcon'>
        </button>
    </nav>
    <button id='hamburgerBtn'>
        <img src='./img/hamburger-white.svg' class='hamburgerWhite' alt='close'>
        <img src='./img/hamburger-black.svg' class='hamburgerBlack' alt='close'>
    </button>
</header>
<!--background-->

<!--Background end-->
<main>
    <img id='backgroundLogo' src='img/canadacoingray.svg'>
    <article>
        <div class='textCenter'>
            <h2>Fill in your wallet address below to track your rewards.</h2>
        </div>

        <div class='tracker'>
            <form class='input'>
                <div class='inputContainer'>
                    <!--  <label for='addressInput'>Address</label>-->
                    <input id='addressInput' name='address' placeholder='Your wallet address'/>
                    <button type='button' id='send' class='disabled' disabled>
                        GO
                        <img id='buttonIcon' src='./img/bi_arrow-right.svg' alt='Arrow'>
                    </button>
                </div>
            </form>
            <div id='boxesContainer'>
                <div class='box'>
                    <h3>
                        CADA balance
                    </h3>
                    <p class='amount'>0</p>
                    <p class='sum'>$0</p>
                </div>
                <div class='box'>
                    <h3>
                        CADA earned from holding
                    </h3>
                    <p class='amount'>0</p>
                    <p class='sum'>$0</p>
                </div>
                <div id='topTwenty' class='box fullWidth'>
                    <h3 class='textCenter'>
                        Top 20 holders
                    </h3>
                    <div id='topTwentyHeader'>
                        <div class='topTwentyHeaderItem'>
                            <p class='textCenter'>Address</p>
                        </div>
                        <div class='topTwentyHeaderItem'>
                            <p class='textCenter'>Balance</p>
                        </div>
                        <div class='topTwentyHeaderItem'>
                            <p class='textCenter'>CADA Earned</p>
                        </div>
                    </div>
                    <div id='topTwentyList'>
                        <!-- Temporary list mapped from JS -->
                    </div>
                </div>

            </div>
        </div>
    </article>
</main>
<footer>
    <div class='socialContainer'>
        <a href='https://www.facebook.com/thecanadacoin/?ref=py_c' class='socialLinks'>
            <img src='./img/facebook.svg' alt='social media icon' class='socialIcon'>
        </a>
        <a href='https://www.instagram.com/thecanadacoin/' class='socialLinks'>
            <img src='./img/instagram.svg' alt='social media icon' class='socialIcon'>
        </a>
        <a href='#' class='socialLinks'>
            <img src='./img/youtube.svg' alt='social media icon' class='socialIcon'>
        </a>
        <a href='https://twitter.com/thecanadacoin' class='socialLinks'>
            <img src='./img/twitter.svg' alt='social media icon' class='socialIcon'>
        </a>
        <a href='https://t.me/CADACOIN' class='socialLinks'>
            <img src='./img/telegram.svg' alt='social media icon' class='socialIcon'>
        </a>
    </div>

    <p id='copyrightText'>
        <!-- Text injected from JS -->
    </p>

</footer>

<div id='overlay'></div>
<div id='menu'>
    <button id='closeBtn'>
        <img src='./img/close-white.svg' class='closeIcon' alt='close'>
    </button>
    <img src='./img/canadacoingray.svg' id='menuLogo' alt='cada-coin'>
    <hr>
    <ul id='menuList'>
        <li>
            <div class='menuItem'>
                <img src='./img/money-white.svg' alt='icon' class='menuIcon'>
                <a href='https://exchange.pancakeswap.finance/#/swap?outputCurrency=0x221AfB058453B1d228BfdAc3b1aAB42f41e37489'
                   target='_blank' class='menuLinks'>
                    Buy
                </a>
            </div>
        </li>
        <li>
            <div class='menuItem'>
                <img src='./img/home-white.svg' alt='icon' class='menuIcon'>
                <a href='https://canadacoin.finance/' target='_blank' class='menuLinks'>Home</a>
            </div>
        </li>
        <li>
            <div class='menuItem'>
                <img src='./img/chart-white.svg' alt='icon' class='menuIcon'>
                <a href='https://poocoin.app/tokens/0x221afb058453b1d228bfdac3b1aab42f41e37489'
                   target='_blank' class='menuLinks'>
                    Chart
                </a>
            </div>
        </li>
    </ul>
    <button id='darkModeMenu' onclick='changeCSS()'>
        <img src='./img/sun-black.svg' alt='toggle icon' id='menuDarkModeIcon'>
    </button>
</div>


<script>
    ////navbar
    window.addEventListener('scroll', function () {
        let header = document.querySelector('header');
        header.classList.toggle('sticky', window.scrollY > 80);
    });

    // The following code is to animate the hamburger menu in and out

    let menu = document.getElementById('menu');
    let overlay = document.getElementById('overlay');

    document.getElementById('hamburgerBtn').addEventListener('click', function () {
        menu.style.display = 'block';
        menu.classList.remove('slideOut');
        overlay.style.display = 'block';
        setTimeout(() => {
            overlay.classList.add('visible');
            menu.classList.add('slideIn');
            document.body.classList.add('stopScroll');
        }, 1);

    });

    document.getElementById('closeBtn').addEventListener('click', closeMenu);
    overlay.addEventListener('click', closeMenu);

    function closeMenu() {
        menu.style.display = 'block';
        menu.style.right = '0';
        menu.classList.remove('slideIn');
        overlay.classList.remove('visible');
        document.body.classList.remove('stopScroll');
        setTimeout(() => {
            menu.classList.add('slideOut');
            setTimeout(() => {
                menu.style.display = 'none';
                menu.style.right = '-500px';
                overlay.style.display = 'none';
            }, 700);
        }, 1);
    };

    ////navbar end

    ///bg start

    ///bg end

    // INPUT AREA
    let addressInput = document.getElementById('addressInput');

    let button = document.getElementById('send');

    addressInput.addEventListener('input', function (e) {
        if (addressInput.value === '') {
            button.disabled = true;
            button.setAttribute('class', 'disabled');
        } else {
            button.disabled = false;
            button.classList.remove('disabled');
        }
    });

    button.addEventListener('click', async function (e) {

        //here lets check i the address has been submitted already
        let address = (document.getElementById('addressInput').value || '').trim();

        let accountInfo = null;

        if (address.length == 0) {
            return false;
        }

        let result = await getAccountInfo(address);

        console.log(result);
    });

    // END INPUT AREA

    // TOP 20 HOLDERS
    for (let i = 0; i < 20; i++) {
        let listItemContainer = document.createElement('div');
        listItemContainer.className = 'listItemContainer';
        let addressBox = document.createElement('div');
        let balanceBox = document.createElement('div');
        let earningsBox = document.createElement('div');

        addressBox.className = 'holderInfoBox';
        balanceBox.className = 'holderInfoBox';
        earningsBox.className = 'holderInfoBox';

        let address = '0x00c6c9e5B99a1818E43698E7295baF8bBD0b5378D';
        let balance = '10,000,000,000,000';
        let earnings = '700,000,000';

        addressBox.innerHTML = `
        <p id='addressText'>
            <span class='prefix'>Address: </span>
            ${address}
        </p>`;

        balanceBox.innerHTML = `
        <p id='addressText'>
            <span class='prefix'>Balance: </span>
            ${balance}
        </p>`;

        earningsBox.innerHTML = `
        <p id='earningsText'>
            <span class='prefix'>Earnings: </span>
            ${earnings}
        </p>`;

        listItemContainer.appendChild(addressBox);
        listItemContainer.appendChild(balanceBox);
        listItemContainer.appendChild(earningsBox);

        document.getElementById('topTwentyList').appendChild(listItemContainer);
    }
    // END TOP 20 HOLDERS

    // FOOTER
    let date = new Date();
    let year = date.getFullYear();
    document.getElementById('copyrightText').innerText = `Copyright © ${year.toString()} Canada Coin. All rights reserved.`;
    // END FOOTER

    // DARK MODE
    const backgroundLogo = document.getElementById('backgroundLogo')
    const toggleIcon = document.getElementById('toggleIcon')
    const menuToggleIcon = document.getElementById('menuDarkModeIcon')

    function changeCSS() {
        let oldLink = document.getElementsByTagName('link').item(0);
        let newLink = document.createElement('link');

        newLink.setAttribute('rel', 'stylesheet');
        newLink.setAttribute('type', 'text/css');

        if (oldLink.getAttribute('href').includes('infopage-dark')) {
            newLink.setAttribute('href', './src/infopage.css');
            backgroundLogo.setAttribute('src', './img/canadacoingray.svg');
            toggleIcon.setAttribute('src', './img/moon-black.svg')
            menuToggleIcon.setAttribute('src','./img/moon-white.svg' )
        } else {
            newLink.setAttribute('href', './src/infopage-dark.css');
            backgroundLogo.setAttribute('src', './img/canadacoindark.svg');
            toggleIcon.setAttribute('src','./img/sun-white.svg')
            menuToggleIcon.setAttribute('src','./img/sun-white.svg' )
        }
        document.getElementsByTagName('head').item(0).replaceChild(newLink, oldLink);
        localStorage.setItem('darkMode', newLink.getAttribute('href'))

    }

    function setInitialCss() {
        const initialCss = localStorage.getItem('darkMode')

        let oldLink = document.getElementsByTagName('link').item(0)
        let newLink = document.createElement('link')

        newLink.setAttribute('rel', 'stylesheet');
        newLink.setAttribute('type', 'text/css');
        newLink.setAttribute('href', initialCss);
        document.getElementsByTagName('head').item(0).replaceChild(newLink, oldLink);

        if (initialCss.includes('infopage-dark')) {
            backgroundLogo.setAttribute('src', './img/canadacoindark.svg')
            toggleIcon.setAttribute('src', './img/sun-white.svg')
            menuToggleIcon.setAttribute('src','./img/sun-white.svg' )
        } else {
            backgroundLogo.setAttribute('src', './img/canadacoingray.svg');
            toggleIcon.setAttribute('src', './img/moon-black.svg')
            menuToggleIcon.setAttribute('src','./img/moon-white.svg' )
        }
    }

    setInitialCss()

    // END DARK MODE

</script>
</body>
</html>